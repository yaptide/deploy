- name: Install python3-pip is absent
  ansible.builtin.apt:
    name: python3-pip
    state: present

- name: Remove Docker Module for Python
  ansible.builtin.pip:
    name: docker
    state: absent

# https://docs.ansible.com/ansible/latest/collections/ansible/builtin/apt_module.html
- name: Remove packages
  ansible.builtin.apt:
    name: "{{ apt_packages }}"
    autoremove: true
    state: absent

- name: Stop and disable docker service
  ansible.builtin.systemd:
    state: stopped
    name: docker
    enabled: false

- name: Remove docker-ce
  ansible.builtin.apt:
    name: docker-ce
    autoremove: true
    state: absent

- name: Remove docker Repository
  ansible.builtin.apt_repository:
    repo: deb https://download.docker.com/linux/ubuntu focal stable
    state: absent
